<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clasificador de Insectos</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script>
         function updateSliderValue(value) {
          document.getElementById('slider-value-text').textContent = value;
        }
        function updateSlider2Value(value) {
          document.getElementById('slider2-value-text').textContent = value;
        }


        function clasificarPaciente(event) {
            event.preventDefault();

            let actividadSexual = document.getElementById('actividad_nivel').value;
            let optimismo = document.getElementById('optimismo_nivel').value;
            const euforia = document.getElementById('euforia').value;
            const humor = document.getElementById('cambio_humor').value;
            const pensamientos = document.getElementById('pensamientos_suicidas').value;
            const crisis = document.getElementById('crisis_nerviosa').value;
            const sobrepiensa = document.getElementById('sobrepiensa').value;
            const comportamiento= document.getElementById('comportamiento').value;
            
            switch (parseInt(optimismo)) {
                case 1:
                    optimismo = -1.748208;
                    break;
                case 2:
                    optimismo = -1.243917;
                    break;
                case 3:
                    optimismo = -0.739626;
                    break;
                case 4:
                    optimismo = -0.235336;
                    break;
                case 5:
                    optimismo = 0.268955;
                    break;
                case 6:
                    optimismo = 0.773246;
                    break;
                case 7:
                    optimismo = 1.277536;
                    break;
                case 8:
                    optimismo = 1.781827;
                    break;
                case 9:
                    optimismo = 2.286118;
                    break;
            }
            
            switch (parseInt(actividadSexual)) {
                case 1:
                    actividadSexual = -1.868904;
                    break;
                case 2:
                    actividadSexual = -1.369419;
                    break;
                case 3:
                    actividadSexual = -0.869935;
                    break;
                case 4:
                    actividadSexual = -0.370451;
                    break;
                case 5:
                    actividadSexual = 0.129033;
                    break;
                case 6:
                    actividadSexual = 0.628518;
                    break;
                case 7:
                    actividadSexual = 1.128002;
                    break;
                case 8:
                    actividadSexual = 1.627486;
                    break;
                case 9:
                    actividadSexual = 2.126971;
                    break;
            }

            fetch('/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `Euphoric=${euforia}&Sexual=${actividadSexual}&Optimisim=${optimismo}&Mood=${humor}&Suicidal=${pensamientos}&Ignore=${comportamiento}&Nervous=${crisis}&Overthinking=${sobrepiensa}`,
            })
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    document.getElementById('resultado').innerText = 'Error: ' + data.error;
                } else {
                    document.getElementById('resultado').innerText = 'El diagnóstico del paciente es ' + data.categoria;
                }
            })
            .catch(error => {
                document.getElementById('resultado').innerText = 'Error en la solicitud.';
                console.error('Error:', error);
            });

        }
    </script>
</head>
<body class="">
    <div class="flex justify-center w-full h-full">
        <form id="formulario" onsubmit="clasificarPaciente(event)" class="shadow-lg p-4 mt-5"> 
            <div>
                <label for="temperature-slider" class="pl-4 block text-gray-700 text-sm font-bold mb-2">Inique su rango de 1-9  dependiendo de las opciones</label>
                <div class="flex space-between justify-center">   
                    <div class="w-50 p-4  rounded-lg">
                        <div class="flex">
                            <label class="block text-gray-700 text-sm font-bold mb-2">Actividad Sexual</label>
                            <label id="slider-value-text" class="ml-4 text-sm font-semibold"></label>
                        </div>
                        <input type="range" id="actividad_nivel" min="1" max="9" step="1" value="1" class="w-full h-2 bg-red-200 rounded-lg appearance-none cursor-pointer accent-blue-500" oninput="updateSliderValue(this.value)">
                    </div>
                    <div class="w-50 p-4  rounded-lg">
                        <div class="flex">
                            <label for="temperature-slider" class="block text-gray-700 text-sm font-bold mb-2">Nivel de optimismo</label>
                            <label id="slider2-value-text" class="ml-4 text-sm font-semibold"></label>
                        </div>
                        <input type="range" id="optimismo_nivel" min="1" max="9" step="1" value="1" class="w-full h-2 bg-yellow-200 rounded-lg appearance-none cursor-pointer accent-green-500" oninput="updateSlider2Value(this.value)">
                    </div>
                </div>
            </div>
            <label for="temperature-slider" class="pl-4 block text-gray-700 text-sm font-bold mb-2">¿Cada cuanto tiene Euforia?</label>
            <select  class="ml-4" id="euforia">
                <option value="-0.748705" selected>Seldom</option>
                <option value="0.433461">Sometimes</option>
                <option value="1.615626">Usually</option>
                <option value="-1.930870">Most_Often</option>
            </select><br>
            <label class="mt-2 pl-4 block text-gray-700 text-sm font-bold mb-2">¿Tiene cambios de humor?</label>
            <select  class="ml-4" id="cambio_humor">
                <option value="1.069045" selected>Si</option>
                <option value="-0.935414">No</option>
            </select><br>
            <label class="mt-2 pl-4 block text-gray-700 text-sm font-bold mb-2">¿Tiene pensamientos suicidas?</label>
            <select  class="ml-4" id="pensamientos_suicidas">
                <option value="1.069045" selected>Si</option>
                <option value="-0.935414">No</option>
            </select><br>
            <label class="mt-2 pl-4 block text-gray-700 text-sm font-bold mb-2">Ha tenido alguna crisis nerviosa?</label>
            <select  class="ml-4" id="crisis_nerviosa">
                <option value="0.967204" selected>Si</option>
                <option value="-1.033908">No</option>
            </select><br>
            <label class="mt-2 pl-4 block text-gray-700 text-sm font-bold mb-2">¿Sobrepiensa?</label>
            <select  class="ml-4" id="sobrepiensa">
                <option value="0.919866" selected>Si</option>
                <option value="-1.087115">No</option>
            </select><br>
            <label class="mt-2 pl-4 block text-gray-700 text-sm font-bold mb-2">¿Ante una situacion delicada usted solo lo ignora y sigue su vida?</label>
            <select  class="ml-4" id="comportamiento">
                <option value="1.183216" selected>Si</option>
                <option value="-0.845154">No</option>
            </select><br>
            <button type="submit"  class="ml-4 mt-4 shadow-lg p-2 hover:text-blue-300 bg-blue-200 rounded-md ">Enviar</button>
            <p id="resultado">  </p>
        </form>

    </div>
    <p id="resultado"></p>
</body>

</html>
